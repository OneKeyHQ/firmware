
/**
 * Request: Ask device to sign transaction
 * gas_price, gas_limit and chain_id must be provided and non-zero.
 * All other fields are optional and default to value `0` if missing.
 * Note: the first at most 1024 bytes of data MUST be transmitted as part of this message.
 * @start
 * @next NervosTxRequest
 * @next Failure
 */
message NervosSignTx {
    repeated uint32 address_n = 1;                                       // BIP-32 path to derive the key from master node
    optional bytes nonce = 2 [default=''];                               // <=256 bit unsigned big endian
    required bytes gas_price = 3;                                        // <=256 bit unsigned big endian (in wei)
    required bytes gas_limit = 4;                                        // <=256 bit unsigned big endian
    optional string to = 11 [default=''];                                // recipient address
    optional bytes value = 6 [default=''];                               // <=256 bit unsigned big endian (in wei)
    optional bytes data_initial_chunk = 7 [default=''];                  // The initial data chunk (<= 1024 bytes)
    optional uint32 data_length = 8 [default=0];                         // Length of transaction payload
    required uint64 chain_id = 9;                                        // Chain Id for EIP 155
    optional uint32 tx_type = 10;                                        // Used for Wanchain
    optional nervos_definitions.NervosDefinitions definitions = 12;  // network and/or token definitions for tx
}


/**
 * Request: Ask device for Nervos address corresponding to address_n path（Test code message structure, currently imitating eth’s）
 * @start
 * @next NervosAddress
 * @next Failure
 */
message NervosGetAddress {
    repeated uint32 address_n = 1;      // BIP-32 path to derive the key from master node
    optional bool show_display = 2;     // optionally show on display before sending the result
    optional bytes encoded_network = 3; // encoded Nervos network
}