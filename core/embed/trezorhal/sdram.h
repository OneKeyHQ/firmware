#ifndef TREZORHAL_FMC_SDRAMH_
#define TREZORHAL_FMC_SDRAMH_

/* Register Mode */
#define FMC_SDRAM_DEVICE_BURST_LENGTH_1 0x00000000U
#define FMC_SDRAM_DEVICE_BURST_LENGTH_2 0x00000001U
#define FMC_SDRAM_DEVICE_BURST_LENGTH_4 0x00000002U
#define FMC_SDRAM_DEVICE_BURST_LENGTH_8 0x00000004U
#define FMC_SDRAM_DEVICE_BURST_TYPE_SEQUENTIAL 0x00000000U
#define FMC_SDRAM_DEVICE_BURST_TYPE_INTERLEAVED 0x00000008U
#define FMC_SDRAM_DEVICE_CAS_LATENCY_2 0x00000020U
#define FMC_SDRAM_DEVICE_CAS_LATENCY_3 0x00000030U
#define FMC_SDRAM_DEVICE_OPERATING_MODE_STANDARD 0x00000000U
#define FMC_SDRAM_DEVICE_WRITEBURST_MODE_PROGRAMMED 0x00000000U
#define FMC_SDRAM_DEVICE_WRITEBURST_MODE_SINGLE 0x00000200U

/* Command Mode */
#define FMC_SDRAM_DEVICE_NORMAL_MODE_CMD 0x00000000U
#define FMC_SDRAM_DEVICE_CLK_ENABLE_CMD 0x00000001U
#define FMC_SDRAM_DEVICE_PALL_CMD 0x00000002U
#define FMC_SDRAM_DEVICE_AUTOREFRESH_MODE_CMD 0x00000003U
#define FMC_SDRAM_DEVICE_LOAD_MODE_CMD 0x00000004U
#define FMC_SDRAM_DEVICE_SELFREFRESH_MODE_CMD 0x00000005U
#define FMC_SDRAM_DEVICE_POWERDOWN_MODE_CMD 0x00000006U

#define FMC_SDRAM_ADDRESS ((uint32_t)0xD0000000)

// COMMON
#define FMC_SDRAM_LTDC_BUFFER_ADDRESS (FMC_SDRAM_ADDRESS)
#define FMC_SDRAM_LTDC_BUFFER_LEN (2 * 1024 * 1024)

// BOOLOADER 0xD0200000
#define FMC_SDRAM_BOOLOADER_BUFFER_ADDRESS \
  (FMC_SDRAM_LTDC_BUFFER_ADDRESS + FMC_SDRAM_LTDC_BUFFER_LEN)
#define FMC_SDRAM_BOOLOADER_BUFFER_LEN (30 * 1024 * 1024)

// FIRMWARE 0xD0200000
#define FMC_SDRAM_LVGL_BUFFER_ADDRESS \
  (FMC_SDRAM_LTDC_BUFFER_ADDRESS + FMC_SDRAM_LTDC_BUFFER_LEN)
#define FMC_SDRAM_LVGL_BUFFER_LEN (2 * 1024 * 1024)

#define FMC_SDRAM_USER_HEAP_ADDRESS \
  (FMC_SDRAM_LVGL_BUFFER_ADDRESS + FMC_SDRAM_LVGL_BUFFER_LEN)
#define FMC_SDRAM_USER_HEAP_LEN (20 * 1024 * 1024)

#define FMC_SDRAM_JPEG_OUTPUT_DATA_BUFFER_ADDRESS \
  (FMC_SDRAM_USER_HEAP_ADDRESS + FMC_SDRAM_USER_HEAP_LEN)

#define FMC_SDRAM_ADDRESS_END ((uint32_t)0xD0000000 + (32 * 1024 * 1024))

int sdram_init(void);

#endif
